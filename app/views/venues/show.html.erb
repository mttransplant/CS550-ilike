<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>

<% provide(:title, 'Venue') %>
<h1><%= @venue['name'] %></h1>

<ul>
  <li><strong>Address:</strong> <%= @venue['address'] %></li>
  <li><strong>City:</strong> <%= @venue['city'] %>, <%= @venue['region_abbr'] %></li>
  <li><strong>ZIP Code:</strong> <%= @venue['postal_code'] %></li>
  <li><strong>Description:</strong> <%= @venue['description'].html_safe unless @venue['description'] == nil %></li>
</ul>

<div style='width: 800px; margin-left: auto; margin-right: auto; margin-top: 50px;'>
  <div id="one_marker" style='width: 800px; height: 400px;'></div>
</div>


<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'one_marker'}}, function(){
    markers = handler.addMarkers([
      {
        lat: <%= @venue['latitude'] %>,
        lng: <%= @venue['longitude'] %>,
        infowindow: "hello!"
      }
    ]);
    handler.map.centerOn(markers[0]);
    handler.getMap().setZoom(13);
  });
</script>